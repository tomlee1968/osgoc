---
hiera::certificate:
  voms.grid.iu.edu:
    cert:
      source: puppet:///modules/hiera/certificates/voms.grid.iu.edu_cert.pem
      path: /etc/grid-security/host/cert.pem
      owner: root
      group: root
      mode: 0644
      replace: true
      notify:
        - Exec[httpd_condrestart]
    key:
      content: |
        ENC[PKCS7,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]
      path: /etc/grid-security/host/key.pem
      owner: root
      group: root
      mode: 0600
      replace: true
      notify:
        - Exec[httpd_condrestart]
  voms.grid.iu.edu_2:
    cert:
      source: puppet:///modules/hiera/certificates/voms.grid.iu.edu_cert.pem
      path: /etc/grid-security/voms/vomscert.pem
      owner: voms
      group: voms
      mode: 0644
      replace: true
      notify:
        - Exec[voms_condrestart]
    key:
      content: |
        ENC[PKCS7,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]
      path: /etc/grid-security/voms/vomskey.pem
      owner: voms
      group: voms
      mode: 0600
      replace: true
      notify:
        - Exec[voms_condrestart]
  'http/voms.grid.iu.edu':
    cert:
      source: puppet:///modules/hiera/certificates/voms.grid.iu.edu_http_cert.pem
      path: /etc/grid-security/http/cert.pem
      owner: tomcat
      group: tomcat
      mode: 0644
      replace: true
      notify:
        - Exec[tomcat6_condrestart]
    key:
      path: /etc/grid-security/http/key.pem
      content: |
        ENC[PKCS7,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]
      owner: tomcat
      group: tomcat
      mode: 0600
      replace: true
      notify:
        - Exec[tomcat6_condrestart]

hiera::exec:
  httpd_condrestart:
    command: /sbin/service httpd condrestart
    refreshonly: true
  tomcat6_condrestart:
    command: /sbin/service tomcat6 condrestart
    refreshonly: true
  voms_condrestart:
    command: /sbin/service voms condrestart
    refreshonly: true

hiera::file:
  /etc/grid-security/http:
    ensure: directory
    owner: root
    group: root
    mode: 0755
  /etc/grid-security/voms:
    ensure: directory
    owner: root
    group: root
    mode: 0755
